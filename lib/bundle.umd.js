!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("zod"),require("reflect-metadata"),require("tsyringe")):"function"==typeof define&&define.amd?define(["exports","zod","reflect-metadata","tsyringe"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).mcpHandler={},t.zod,t.Reflect,t.tsyringe)}(this,(function(t,e,n,o){"use strict";const r=(t,e)=>{const n=`${e}:functionId`;return o.container.registerInstance(n,t),o.container.resolve(e)},c=t=>{const e={};for(const[n,o]of Object.entries(t)){const t=r(n,o);e[n]=t.execute.bind(t)}return e};const s=(t,e)=>{const n=`${e}:functionId`;return o.container.registerInstance(n,t),o.container.resolve(e)},i=t=>{const e={};for(const[n,o]of Object.entries(t)){const t=s(n,o);e[n]=t.getPromptResult.bind(t)}return e};const p=e.z.record(e.z.object({function:e.z.string().optional(),prompt:e.z.string().optional()})),a=e.z.record(p),f=e.z.custom((t=>"function"==typeof t||t instanceof Function),{message:"Expected a function"}),u=e.z.record(e.z.object({function:e.z.record(f),prompt:e.z.record(f)}));t.GeneralFunction=class{constructor(t){this.functionId=t}},t.GeneralPrompt=class{constructor(t){this.functionId=t}},t.createContexts=t=>{const n=e.z.object({functionMap:e.z.record(e.z.string()),promptsMap:e.z.record(e.z.string())});let o={};return Object.entries(t).forEach((([t,e])=>{const{functionMap:r,promptsMap:s}=(p=e,Object.entries(p).reduce(((t,[e,o])=>n.parse({functionMap:{...t.functionMap,...o.function?{[e]:o.function}:{}},promptsMap:{...t.promptsMap,...o.prompt?{[e]:o.prompt}:{}}})),n.parse({functionMap:{},promptsMap:{}})));var p;o={...o,[t]:{function:Object.keys(r).length>0?c(r):{},prompt:Object.keys(s).length>0?i(s):{}}}})),u.parse(o)},t.createFunctions=c,t.createPrompts=i,t.serverConfigSchema=a}));
//# sourceMappingURL=bundle.umd.js.map
